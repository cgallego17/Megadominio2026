{% extends 'panel/panel_base.html' %}

{% block panel_title %}Cambiar Contraseña{% endblock %}
{% block panel_heading %}Cambiar Contraseña{% endblock %}
{% block panel_desc %}Actualiza tu contraseña de acceso{% endblock %}

{% block panel_actions %}
<a href="{% url 'core:panel_perfil' %}" class="inline-flex items-center gap-2 px-4 py-2 bg-gray-800 text-gray-300 text-sm font-semibold rounded-lg hover:bg-gray-700 transition">
    <i class="fas fa-arrow-left"></i> Volver al perfil
</a>
{% endblock %}

{% block panel_content %}
{% if messages %}
{% for message in messages %}
<div class="bg-green-500/10 border border-green-500/20 text-green-400 px-5 py-3 rounded-xl mb-6 flex items-center text-sm font-medium">
    <i class="fas fa-check-circle mr-2"></i>
    {{ message }}
</div>
{% endfor %}
{% endif %}

<div class="max-w-lg">
    <div class="bg-gray-900 border border-gray-800 rounded-xl overflow-hidden">
        <div class="px-5 py-4 border-b border-gray-800">
            <h3 class="text-sm font-bold text-white">Nueva contraseña</h3>
        </div>
        <form method="post" action="{% url 'core:panel_password' %}" class="p-5">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg mb-5 flex items-center text-sm">
                <i class="fas fa-exclamation-circle mr-2"></i>
                {{ form.non_field_errors.0 }}
            </div>
            {% endif %}

            <div class="mb-5">
                <label for="id_current_password" class="block text-sm font-semibold text-gray-300 mb-2">
                    {{ form.current_password.label }}
                </label>
                {{ form.current_password }}
                {% if form.current_password.errors %}
                <p class="text-xs text-red-400 mt-1">{{ form.current_password.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="mb-5">
                <label for="id_new_password1" class="block text-sm font-semibold text-gray-300 mb-2">
                    {{ form.new_password1.label }}
                </label>
                {{ form.new_password1 }}
                {% if form.new_password1.errors %}
                <p class="text-xs text-red-400 mt-1">{{ form.new_password1.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="mb-6">
                <label for="id_new_password2" class="block text-sm font-semibold text-gray-300 mb-2">
                    {{ form.new_password2.label }}
                </label>
                {{ form.new_password2 }}
                {% if form.new_password2.errors %}
                <p class="text-xs text-red-400 mt-1">{{ form.new_password2.errors.0 }}</p>
                {% endif %}
            </div>

            <div class="flex items-center justify-end gap-3">
                <a href="{% url 'core:panel_perfil' %}" class="px-4 py-2.5 text-sm font-semibold text-gray-400 hover:text-white transition">Cancelar</a>
                <button type="submit" class="inline-flex items-center gap-2 px-5 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-lg hover:bg-red-700 transition shadow-sm shadow-red-600/20">
                    <i class="fas fa-lock"></i> Actualizar contraseña
                </button>
            </div>
        </form>
    </div>

    <div class="mt-5 bg-gray-900 border border-gray-800 rounded-xl p-5">
        <div class="flex items-start gap-3">
            <div class="w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center flex-shrink-0">
                <i class="fas fa-info-circle text-blue-400 text-sm"></i>
            </div>
            <div>
                <p class="text-gray-400 text-xs leading-relaxed">
                    Tu contraseña debe tener al menos <strong class="text-gray-300">8 caracteres</strong>.
                    Usa una combinación de letras, números y símbolos para mayor seguridad.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
